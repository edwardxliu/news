"use strict";(()=>{var i=(e,t=!0)=>e.cloneNode(t);async function f(e){try{let t=await fetch(e);return t.ok?await t.json():[]}catch{return[]}}window.Webflow||(window.Webflow=[]);window.Webflow.push(async()=>{let e=document.querySelector('[data-element="search-input"]');e&&u(e.value)});var d=({url:e,title:t,content:o,org:n,p_date:m},a)=>{let r=i(a),l=r.querySelector('[data-element="search-title"]'),c=r.querySelector('[data-element="search-org"]'),s=r.querySelector('[data-element="search-date"]'),p=r.querySelector('[data-element="search-snippet"]');return r&&(r.href=e),l&&(l.innerHTML=t),c&&(c.textContent=n),s&&(s.textContent=m),p&&(p.innerHTML=o),r.removeAttribute("data-cloak"),r},u=async e=>{let t=await f(`http://metro-info.edwardxwliu.cn:5000/query?value=${e}`);if(!t){window.location.replace("/");return}let o=document.querySelector('[data-element="search-link"]');if(!o)return;let n=document.querySelector('[data-element="search-grid"]');if(!n)return;let m=t.map(r=>d(r,o));o.remove();let a=document.querySelector('[data-element="search-link"]');a&&a.remove(),n.append(...m)};})();
