"use strict";(()=>{var l=(n,t=!0)=>n.cloneNode(t);async function f(n){try{let t=await fetch(n);return t.ok?await t.json():[]}catch{return[]}}var c=[];window.Webflow||(window.Webflow=[]);window.Webflow.push(async()=>{let t=new URLSearchParams(window.location.search).get("query"),r=document.querySelector('[data-element="search-input"]'),a=document.querySelector('[data-element="search-form"]'),o=document.querySelector('[data-element="search-input-side"]'),m=document.querySelector('[data-element="search-form-side"]');r&&o&&a&&m&&(t&&(r.value=t,o.value=t,x(r.value)),a.addEventListener("submit",e=>{e.preventDefault();let i=r.value;window.location.href=`/search?query=${encodeURIComponent(i)}`}),m?.addEventListener("submit",e=>{if(e.preventDefault(),!o)return;let i=o.value;window.location.href=`/search?query=${encodeURIComponent(i)}`}))});var d=({url:n,title:t,content:r,org:a,p_date:o},m)=>{let e=l(m),i=e.querySelector('[data-element="search-title"]'),s=e.querySelector('[data-element="search-org"]'),p=e.querySelector('[data-element="search-date"]'),u=e.querySelector('[data-element="search-snippet"]');return e&&(e.href=n),i&&(i.innerHTML=t),s&&(s.textContent=a),p&&(p.textContent=o),u&&(u.innerHTML=r),e.removeAttribute("data-cloak"),e},x=async n=>{let t=await f(`http://metro-info.edwardxwliu.cn:5000/query?value=${n}`);if(!t){window.location.replace("/");return}let r=document.querySelector('[data-element="search-link"]');if(!r)return;let a=document.querySelector('[data-element="search-grid"]');if(!a)return;let o=t.map(e=>d(e,r));c&&c.map(e=>a.removeChild(e)),r.remove();let m=document.querySelector('[data-element="search-link"]');m&&m.remove(),a.append(...o),c=o};})();
